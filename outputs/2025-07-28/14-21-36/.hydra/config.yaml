_group_:
  _target_: torchmetrics.audio.ScaleInvariantSignalNoiseRatio
  batch_size: 4
  num_workers: 4
  pin_memory: true
  train_dataset_config:
    _target_: banda.data.datasets.musdb18hq.MUSDB18HQDataset
    config:
      split: train
      dataset_connector:
        _target_: banda.data.datasets.musdb18hq.MUSDB18Connector
        config:
          split: train
          data_root: ${oc.env:DATA_ROOT}/musdb18hq/intermediates/npz
      fs: 44100
      premix_transform:
        _target_: banda.data.augmentations.base.ComposePreMixTransforms
        transforms:
        - _target_: banda.data.samplers.random_chunk.RandomChunkingTransform
          config:
            chunk_size_seconds: 3.0
            fs: 44100
            align_sources: true
      postmix_transform:
        _target_: banda.data.augmentations.base.ComposePostMixTransforms
        transforms:
        - _target_: banda.data.augmentations.time_domain.Gain
          config:
            min_gain_db: -6.0
            max_gain_db: 6.0
        - _target_: banda.data.augmentations.time_domain.NormalizeAudio
          config:
            target_rms_db: -20.0
  val_dataset_config:
    _target_: banda.data.datasets.musdb18hq.MUSDB18HQDataset
    config:
      split: val
      dataset_connector:
        _target_: banda.data.datasets.musdb18hq.MUSDB18Connector
        config:
          split: val
          data_root: ${oc.env:DATA_ROOT}/musdb18hq/intermediates/npz
      fs: 44100
      premix_transform: null
      postmix_transform: null
  stems:
  - vocals
  - bass
  - drums
  - other
  fs: 44100
  n_fft: 2048
  win_length: 2048
  hop_length: 512
  window_fn: hann_window
  center: true
  normalized: true
  pad_mode: constant
  onesided: true
  band_specs: null
  require_no_overlap: false
  require_no_gap: true
  normalize_channel_independently: false
  treat_channel_as_feature: true
  emb_dim: 128
  in_channel: 2
  tf_model_type: rnn
  n_tf_modules: 12
  rnn_dim: 256
  bidirectional: true
  rnn_type: LSTM
  tf_dropout: 0.0
  mlp_dim: 512
  hidden_activation: Tanh
  hidden_activation_kwargs: null
  complex_mask: true
  overlapping_band: false
  use_freq_weights: false
  max_epochs: 5
  accelerator: auto
  devices: auto
  log_every_n_steps: 50
  lr: 0.001
  loss_fn:
    _target_: banda.losses.multi_resolution_l1_snr.MultiResolutionSTFTLoss
    n_ffts:
    - 2048
    - 512
    hop_lengths:
    - 512
    - 128
    win_lengths:
    - 2048
    - 512
    mag_weight: 1.0
    phase_weight: 0.0
    log_scale: false
  data:
    train_dataset_config:
      config:
        dataset_connector:
          config:
            data_root: ${oc.env:DATA_ROOT}/musdb18hq/intermediates/npz
    val_dataset_config:
      config:
        dataset_connector:
          config:
            data_root: ${oc.env:DATA_ROOT}/musdb18hq/intermediates/npz
  model:
    _target_: banda.models.separator.Separator
    stems:
    - vocals
    - bass
    - drums
    - other
    fs: 44100
    n_fft: 2048
    win_length: 2048
    hop_length: 512
    window_fn: hann_window
    center: true
    normalized: true
    pad_mode: constant
    onesided: true
    band_specs: null
    require_no_overlap: false
    require_no_gap: true
    normalize_channel_independently: false
    treat_channel_as_feature: true
    emb_dim: 128
    in_channel: 2
    tf_model_type: rnn
    n_tf_modules: 12
    rnn_dim: 256
    bidirectional: true
    rnn_type: LSTM
    tf_dropout: 0.0
    mlp_dim: 512
    hidden_activation: Tanh
    hidden_activation_kwargs: null
    complex_mask: true
    overlapping_band: false
    use_freq_weights: false
  trainer:
    _target_: pytorch_lightning.Trainer
    max_epochs: 5
    accelerator: auto
    devices: auto
    log_every_n_steps: 50
project_root: ${oc.env:PROJECT_ROOT,.}
experiment_name: default_experiment
seed: 42
paths:
  output_dir: ${hydra.run.dir}
  log_dir: ${hydra.run.dir}/logs
  data_dir: ${project_root}/data
