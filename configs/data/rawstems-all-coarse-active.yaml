defaults:
- augmentation/default
- _self_

train:
  datasource:
  - cls: RawStemsStemWiseDatasource
    params:
      split: train
      stems: _rs_coarse
      mode: active

  dataset:
    cls: RandomChunkAutoMixDataset
    params:
      n_channels: 2
      fs: 44100
      chunk_size_seconds: 6.0
      allow_autolooping: true
      max_dataset_size: 8192

      n_coarse_stems_min: 8
      n_coarse_stems_max: 8

      n_fine_stems_min: 1
      n_fine_stems_max: 3
      
      variable_sources: true

  dataloader:
    batch_size: 8
    num_workers: 24
    shuffle: true
    drop_last: False
    pin_memory: true
    prefetch_factor: 2

val:
  datasource:
  - cls: RawStemsStemWiseDatasource
    params:
      split: val
      load_duration: true
      stems: _rs_coarse
      mode: active

  dataset:
    cls: DeterministicChunkAutoMixDataset
    params:
      n_channels: 2
      fs: 44100
      chunk_size_seconds: 6.0
      allow_autolooping: true
      max_dataset_size: 8192

      n_coarse_stems_min: 8
      n_coarse_stems_max: 8

      n_fine_stems_min: 1
      n_fine_stems_max: 3
      
      variable_sources: true

  dataloader:
    batch_size: 2
    num_workers: 8
    shuffle: false
    drop_last: false
    pin_memory: true
