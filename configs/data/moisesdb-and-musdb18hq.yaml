defaults:
- default-augmentation
- _self_

train:
  datasource:
  - cls: MUSDB18HQDatasource
    params:
      split: train
  - cls: MoisesDBDatasource
    params:
      split: train
      stems: _moises_vdbo

  dataset:
    cls: RandomChunkDataset
    params:
      n_channels: 2
      fs: 44100
      chunk_size_seconds: 6.0
      allow_autolooping: true
      max_dataset_size: 8192
      variable_sources: true

      premix_augmentation:
        augmentations:
        - cls: Gain
          params:
            min_gain_db: -6
            max_gain_db: 6.0
            p: 1.0
        # - cls: Shift
        #   params:
        #     min_shift: -0.5
        #     max_shift: 0.5
        #     shift_unit: "fraction"
        #     rollover: True
        #     p: 0.5
        - cls: PolarityInversion
          params:
            p: 0.5
        # - cls: RandomDrop
        #   params:
        #     p: 0.10

  dataloader:
    batch_size: 8
    num_workers: 16
    shuffle: true
    drop_last: False
    pin_memory: true
    prefetch_factor: 4

val:
  datasource:
  - cls: MUSDB18HQDatasource
    params:
      split: val
      load_duration: true
  - cls: MoisesDBDatasource
    params:
      split: val
      stems: _moises_vdbo
      load_duration: true

  dataset:
    cls: DeterministicChunkDataset
    params:
      n_channels: 2
      fs: 44100
      chunk_size_seconds: 6.0
      hop_size_seconds: 6.0
      allow_autolooping: false
      max_dataset_size: 1024
      variable_sources: true

  dataloader:
    batch_size: 8
    num_workers: 16
    shuffle: false
    drop_last: false
    pin_memory: true
